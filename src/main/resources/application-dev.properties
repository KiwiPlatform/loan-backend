# ===================================================================
# CONFIGURACIÓN DESARROLLO (DEV) - RENDER
# ===================================================================

# Base de datos PostgreSQL - Lee desde variables de entorno
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DB_USERNAME:kiwi_platform_dev_user}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Pool de conexiones para desarrollo
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:5}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:2}
spring.datasource.hikari.connection-timeout=${DB_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ===================================================================
# CONFIGURACIÓN FLYWAY
# ===================================================================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.clean-disabled=false
spring.flyway.validate-on-migrate=true
spring.flyway.out-of-order=true
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
spring.flyway.group=true

# ===================================================================
# SERVIDOR
# ===================================================================
server.port=${PORT:8080}
server.error.include-message=always
server.error.include-binding-errors=always
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain

# ===================================================================
# ACTUATOR para desarrollo
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus,env,beans,configprops
management.endpoints.web.base-path=/actuator
management.endpoint.health.show-details=always
management.prometheus.metrics.export.enabled=true

# ===================================================================
# SWAGGER/OpenAPI
# ===================================================================
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.show-actuator=false

# ===================================================================
# LOGGING para desarrollo
# ===================================================================
logging.level.root=INFO
logging.level.com.kiwipay=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.flywaydb=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql=TRACE
logging.level.org.springframework.security=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# DESHABILITAR CREACIÓN AUTOMÁTICA DE USUARIOS POR DEFECTO
logging.level.org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration=OFF

# ===================================================================
# CORS permisivo para desarrollo
# ===================================================================
kiwipay.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:3001,http://localhost:4200,http://localhost:8080,http://localhost:8081}
kiwipay.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
kiwipay.cors.allowed-headers=*
kiwipay.cors.allow-credentials=true

# ===================================================================
# SEGURIDAD JWT
# ===================================================================
kiwipay.security.jwt.secret=${JWT_SECRET}
kiwipay.security.jwt.expiration=${JWT_EXPIRATION:86400}
kiwipay.security.rate-limit.requests-per-minute=${RATE_LIMIT_RPM:100}
kiwipay.security.rate-limit.burst-capacity=${RATE_LIMIT_BURST:200}

# ===================================================================
# ENCRIPTACIÓN DE DATOS SENSIBLES
# ===================================================================
app.security.encryption.password=${KIWIPAY_ENCRYPTION_PASSWORD}
app.security.encryption.salt=${KIWIPAY_ENCRYPTION_SALT}
app.security.encryption.algorithm=${KIWIPAY_ENCRYPTION_ALGORITHM:AES}
app.security.encryption.key-length=${KIWIPAY_ENCRYPTION_KEY_LENGTH:256}
app.security.encryption.mode=${KIWIPAY_ENCRYPTION_MODE:GCM}
app.security.encryption.padding=${KIWIPAY_ENCRYPTION_PADDING:NoPadding}
app.security.encryption.provider=${KIWIPAY_ENCRYPTION_PROVIDER:SunJCE}
app.security.encryption.iteration-count=${KIWIPAY_ENCRYPTION_ITERATIONS:100000} 