2025-06-22 00:00:56 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-22 00:00:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:00:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:42:42 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 21676 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:42:42 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:42:42 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "dev"
2025-06-22 00:42:42 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:42:42 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:42:42 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:42:42 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 4 JPA repository interfaces.
2025-06-22 00:42:43 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:42:43 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:42:43 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:42:43 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:42:43 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1466 ms
2025-06-22 00:42:43 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:42:43 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:42:43 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5ad26c6a
2025-06-22 00:42:43 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:42:43 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:42:43 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:42:43 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/callback' ...
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/callback using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1fac8eb6 ...
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Unable to resolve location classpath:db/callback.
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/migration' ...
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/migration using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1fac8eb6 ...
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning URL: file:/C:/Users/ALEXANDER.CASTILLO/OneDrive%20-%20ALESE%20SAC/Escritorio/KIWIPAY/ERP-Base/kiwipay-loan-backend/build/resources/main/db/migration
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning starting at classpath root in filesystem: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning for resources in path: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration (db/migration)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V1__create_initial_schema.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V2__make_client_name_and_dni_optional.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V3__create_auth_tables.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V4__fix_users_table_columns.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V5__fix_user_passwords.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V6__create_test_user.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classes at classpath:db/migration
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V2__make_client_name_and_dni_optional.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V3__create_auth_tables.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V5__fix_user_passwords.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V6__create_test_user.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V1__create_initial_schema.sql
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V4__fix_users_table_columns.sql
2025-06-22 00:42:43 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_dev (PostgreSQL 16.9)
2025-06-22 00:42:43 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Driver: PostgreSQL JDBC Driver 42.6.0
2025-06-22 00:42:43 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - DDL Transactions Supported: true
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Schemas: 
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Default schema: null
2025-06-22 00:42:43 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.c.i.c.SqlScriptCallbackFactory - Scanning for SQL callbacks ...
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.command.DbValidate - Validating migrations ...
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:42:43 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Memory usage: 36 of 108M
2025-06-22 00:42:43 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : 377753469
-> Resolved locally    : -1851624885
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
2025-06-22 00:42:43 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:42:44 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:42:44 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 00:42:44 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 00:42:44 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : 377753469
-> Resolved locally    : -1851624885
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : 377753469
-> Resolved locally    : -1851624885
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:146)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
2025-06-22 00:45:59 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 15628 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:45:59 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:45:59 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "dev"
2025-06-22 00:45:59 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:45:59 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:46:00 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:46:00 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 4 JPA repository interfaces.
2025-06-22 00:46:01 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:46:01 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:46:01 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:46:01 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:46:01 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1477 ms
2025-06-22 00:46:01 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:46:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:46:01 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5ad26c6a
2025-06-22 00:46:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:46:01 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:46:01 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:46:01 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/callback' ...
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/callback using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1fac8eb6 ...
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Unable to resolve location classpath:db/callback.
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/migration' ...
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/migration using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1fac8eb6 ...
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning URL: file:/C:/Users/ALEXANDER.CASTILLO/OneDrive%20-%20ALESE%20SAC/Escritorio/KIWIPAY/ERP-Base/kiwipay-loan-backend/build/resources/main/db/migration
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning starting at classpath root in filesystem: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning for resources in path: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration (db/migration)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V1__create_initial_schema.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V2__make_client_name_and_dni_optional.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V3__create_auth_tables.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V4__fix_users_table_columns.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V5__fix_user_passwords.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V6__create_test_user.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classes at classpath:db/migration
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V2__make_client_name_and_dni_optional.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V3__create_auth_tables.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V5__fix_user_passwords.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V6__create_test_user.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V1__create_initial_schema.sql
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V4__fix_users_table_columns.sql
2025-06-22 00:46:01 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_dev (PostgreSQL 16.9)
2025-06-22 00:46:01 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Driver: PostgreSQL JDBC Driver 42.6.0
2025-06-22 00:46:01 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - DDL Transactions Supported: true
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Schemas: 
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Default schema: null
2025-06-22 00:46:01 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.c.i.c.SqlScriptCallbackFactory - Scanning for SQL callbacks ...
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.command.DbValidate - Validating migrations ...
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:46:01 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Memory usage: 38 of 108M
2025-06-22 00:46:01 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : 377753469
-> Resolved locally    : -1851624885
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
2025-06-22 00:46:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:46:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:46:01 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 00:46:01 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 00:46:01 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : 377753469
-> Resolved locally    : -1851624885
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : 377753469
-> Resolved locally    : -1851624885
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:146)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
2025-06-22 00:49:58 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.12 with PID 25452 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:49:58 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:49:58 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "dev"
2025-06-22 00:49:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:49:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:49:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:49:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 4 JPA repository interfaces.
2025-06-22 00:49:59 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:49:59 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:49:59 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:49:59 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:49:59 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1624 ms
2025-06-22 00:50:00 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:50:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:50:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@89609d3
2025-06-22 00:50:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:50:00 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:50:00 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:50:00 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/callback' ...
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/callback using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@45fcf8ee ...
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Unable to resolve location classpath:db/callback.
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/migration' ...
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/migration using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@45fcf8ee ...
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning URL: file:/C:/Users/ALEXANDER.CASTILLO/OneDrive%20-%20ALESE%20SAC/Escritorio/KIWIPAY/ERP-Base/kiwipay-loan-backend/build/resources/main/db/migration
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning starting at classpath root in filesystem: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning for resources in path: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration (db/migration)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V1__create_initial_schema.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V2__make_client_name_and_dni_optional.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V3__create_auth_tables.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V4__fix_users_table_columns.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V5__fix_user_passwords.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V6__create_test_user.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classes at classpath:db/migration
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V2__make_client_name_and_dni_optional.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V3__create_auth_tables.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V5__fix_user_passwords.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V6__create_test_user.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V1__create_initial_schema.sql
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V4__fix_users_table_columns.sql
2025-06-22 00:50:00 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_dev (PostgreSQL 16.9)
2025-06-22 00:50:00 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Driver: PostgreSQL JDBC Driver 42.6.0
2025-06-22 00:50:00 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - DDL Transactions Supported: true
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Schemas: 
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Default schema: null
2025-06-22 00:50:00 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.c.i.c.SqlScriptCallbackFactory - Scanning for SQL callbacks ...
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.command.DbValidate - Validating migrations ...
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:50:00 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 6 migrations (execution time 00:00.020s)
2025-06-22 00:50:00 [restartedMain] DEBUG o.f.core.internal.command.DbSchemas - Skipping creation of existing schema: "public"
2025-06-22 00:50:00 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 6
2025-06-22 00:50:00 [restartedMain] WARN  o.f.core.internal.command.DbMigrate - outOfOrder mode is active. Migration of schema "public" may not be reproducible.
2025-06-22 00:50:00 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-06-22 00:50:00 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Memory usage: 45 of 108M
2025-06-22 00:50:00 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-22 00:50:00 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-06-22 00:50:00 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000025: Second-level cache region factory [org.hibernate.cache.jcache.internal.JCacheRegionFactory]
2025-06-22 00:50:00 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-22 00:50:00 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-22 00:50:00 [restartedMain] DEBUG o.h.t.d.sql.spi.DdlTypeRegistry - addDescriptor(6, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@338c19ac) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@6128d35f)
2025-06-22 00:50:01 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-22 00:50:01 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-22 00:50:01 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-22 00:50:02 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 21 mappings in 'requestMappingHandlerMapping'
2025-06-22 00:50:02 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-22 00:50:02 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoint(s) beneath base path '/actuator'
2025-06-22 00:50:02 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/swagger-ui/**'], Mvc [pattern='/v3/api-docs/**'], Mvc [pattern='/swagger-resources/**'], Mvc [pattern='/webjars/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@1dd260b0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@62815390, org.springframework.security.web.context.SecurityContextHolderFilter@75ad92db, org.springframework.security.web.header.HeaderWriterFilter@7910d25f, org.springframework.security.web.authentication.logout.LogoutFilter@55144421, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67a06329, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51bad87e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@19e6c6b7, org.springframework.security.web.access.ExceptionTranslationFilter@6a0e547f, org.springframework.security.web.access.intercept.AuthorizationFilter@172d4d38]
2025-06-22 00:50:02 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/api/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@477ae3b2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a40d410, org.springframework.security.web.context.SecurityContextHolderFilter@77c0abbc, org.springframework.security.web.header.HeaderWriterFilter@eea9978, org.springframework.web.filter.CorsFilter@51ee2949, org.springframework.security.web.authentication.logout.LogoutFilter@23f1eaa9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@34bb632c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@35f0fdb7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@61df173b, org.springframework.security.web.session.SessionManagementFilter@1384d42f, org.springframework.security.web.access.ExceptionTranslationFilter@21a65005, org.springframework.security.web.access.intercept.AuthorizationFilter@472ef5ea]
2025-06-22 00:50:02 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/actuator/**'], Mvc [pattern='/error'], Mvc [pattern='/']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@89218b5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4780cb58, org.springframework.security.web.context.SecurityContextHolderFilter@1c3449fa, org.springframework.security.web.header.HeaderWriterFilter@1b127674, org.springframework.security.web.authentication.logout.LogoutFilter@7ba69f60, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@568cd257, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4d4a1ba4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b25d62d, org.springframework.security.web.access.ExceptionTranslationFilter@7c2cfe3c, org.springframework.security.web.access.intercept.AuthorizationFilter@560241c7]
2025-06-22 00:50:02 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/swagger-ui/**'], Mvc [pattern='/v3/api-docs/**'], Mvc [pattern='/swagger-resources/**'], Mvc [pattern='/webjars/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@1d9f01ce, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b19ffa3, org.springframework.security.web.context.SecurityContextHolderFilter@61d465e, org.springframework.security.web.header.HeaderWriterFilter@7fe63b5c, org.springframework.security.web.authentication.logout.LogoutFilter@448c4583, com.kiwipay.kiwipay_loan_backend.leads.config.SwaggerSecurityAnnotations$SwaggerAuthFilter@959d10a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@841047f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@663d2232, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@28991488, org.springframework.security.web.access.ExceptionTranslationFilter@73d35f0, org.springframework.security.web.access.intercept.AuthorizationFilter@4bcd458c]
2025-06-22 00:50:02 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-22 00:50:02 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-22 00:50:03 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-22 00:50:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-22 00:50:03 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Started KiwipayLoanBackendApplication in 5.266 seconds (process running for 5.566)
2025-06-22 00:50:09 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-22 00:50:09 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7caaa527
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@cb8abd6
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-22 00:50:09 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-06-22 00:50:09 [http-nio-8080-exec-1] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/actuator/health' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/actuator/health", parameters={}
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [org.springframework.boot.actuate.health.SystemHealth@150a1ab7]
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:50:09 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:01 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 3864 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:51:01 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:51:01 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "dev"
2025-06-22 00:51:01 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:51:01 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:51:01 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:51:01 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 4 JPA repository interfaces.
2025-06-22 00:51:02 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:51:02 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:51:02 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:51:02 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:51:02 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1507 ms
2025-06-22 00:51:03 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:51:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:51:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@548396dd
2025-06-22 00:51:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:51:03 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:51:03 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:51:03 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/callback' ...
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/callback using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@52ed4c5f ...
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Unable to resolve location classpath:db/callback.
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/migration' ...
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/migration using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@52ed4c5f ...
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning URL: file:/C:/Users/ALEXANDER.CASTILLO/OneDrive%20-%20ALESE%20SAC/Escritorio/KIWIPAY/ERP-Base/kiwipay-loan-backend/build/resources/main/db/migration
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning starting at classpath root in filesystem: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning for resources in path: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration (db/migration)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V1__create_initial_schema.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V2__make_client_name_and_dni_optional.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V3__create_auth_tables.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V4__fix_users_table_columns.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V5__fix_user_passwords.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V6__create_test_user.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classes at classpath:db/migration
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V2__make_client_name_and_dni_optional.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V3__create_auth_tables.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V5__fix_user_passwords.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V6__create_test_user.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V1__create_initial_schema.sql
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V4__fix_users_table_columns.sql
2025-06-22 00:51:03 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_dev (PostgreSQL 16.9)
2025-06-22 00:51:03 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Driver: PostgreSQL JDBC Driver 42.6.0
2025-06-22 00:51:03 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - DDL Transactions Supported: true
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Schemas: 
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Default schema: null
2025-06-22 00:51:03 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.c.i.c.SqlScriptCallbackFactory - Scanning for SQL callbacks ...
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.command.DbValidate - Validating migrations ...
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 00:51:03 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 6 migrations (execution time 00:00.029s)
2025-06-22 00:51:03 [restartedMain] DEBUG o.f.core.internal.command.DbSchemas - Skipping creation of existing schema: "public"
2025-06-22 00:51:03 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 6
2025-06-22 00:51:03 [restartedMain] WARN  o.f.core.internal.command.DbMigrate - outOfOrder mode is active. Migration of schema "public" may not be reproducible.
2025-06-22 00:51:03 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-06-22 00:51:03 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Memory usage: 42 of 108M
2025-06-22 00:51:03 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-22 00:51:03 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-06-22 00:51:03 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000025: Second-level cache region factory [org.hibernate.cache.jcache.internal.JCacheRegionFactory]
2025-06-22 00:51:03 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-22 00:51:03 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-22 00:51:03 [restartedMain] DEBUG o.h.t.d.sql.spi.DdlTypeRegistry - addDescriptor(6, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@27bb2d5e) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@79982e6)
2025-06-22 00:51:04 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-22 00:51:04 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-22 00:51:04 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-22 00:51:05 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 21 mappings in 'requestMappingHandlerMapping'
2025-06-22 00:51:05 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-22 00:51:05 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoint(s) beneath base path '/actuator'
2025-06-22 00:51:05 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/swagger-ui/**'], Mvc [pattern='/v3/api-docs/**'], Mvc [pattern='/swagger-resources/**'], Mvc [pattern='/webjars/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@4302c17e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7331856b, org.springframework.security.web.context.SecurityContextHolderFilter@378c2943, org.springframework.security.web.header.HeaderWriterFilter@6d5336a7, org.springframework.security.web.authentication.logout.LogoutFilter@39c3c5c3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e5d6c86, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1a5aa9f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c7ecc1d, org.springframework.security.web.access.ExceptionTranslationFilter@3fa4391d, org.springframework.security.web.access.intercept.AuthorizationFilter@3c7e04c6]
2025-06-22 00:51:05 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/api/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@6bd51e1a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@186bc16e, org.springframework.security.web.context.SecurityContextHolderFilter@7eeb7a91, org.springframework.security.web.header.HeaderWriterFilter@3fc96887, org.springframework.web.filter.CorsFilter@1f139984, org.springframework.security.web.authentication.logout.LogoutFilter@f692dfc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@587de79c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7652bb6b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@585cf0b5, org.springframework.security.web.session.SessionManagementFilter@2509906d, org.springframework.security.web.access.ExceptionTranslationFilter@31a9908f, org.springframework.security.web.access.intercept.AuthorizationFilter@285deab1]
2025-06-22 00:51:05 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/actuator/**'], Mvc [pattern='/error'], Mvc [pattern='/']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@7f646377, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@76ad0c44, org.springframework.security.web.context.SecurityContextHolderFilter@460a7f84, org.springframework.security.web.header.HeaderWriterFilter@2f33509a, org.springframework.security.web.authentication.logout.LogoutFilter@330748ef, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@141f9330, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13e6c08e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@638c9d96, org.springframework.security.web.access.ExceptionTranslationFilter@16023f92, org.springframework.security.web.access.intercept.AuthorizationFilter@7eae92ff]
2025-06-22 00:51:05 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/swagger-ui/**'], Mvc [pattern='/v3/api-docs/**'], Mvc [pattern='/swagger-resources/**'], Mvc [pattern='/webjars/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@2a63061a, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@78fd81eb, org.springframework.security.web.context.SecurityContextHolderFilter@15e8b6e, org.springframework.security.web.header.HeaderWriterFilter@6d193a11, org.springframework.security.web.authentication.logout.LogoutFilter@28ff5673, com.kiwipay.kiwipay_loan_backend.leads.config.SwaggerSecurityAnnotations$SwaggerAuthFilter@3320bebd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@454102d9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7962c7c8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@9004bac, org.springframework.security.web.access.ExceptionTranslationFilter@78489afb, org.springframework.security.web.access.intercept.AuthorizationFilter@a56099c]
2025-06-22 00:51:05 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-22 00:51:05 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-22 00:51:06 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-22 00:51:06 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-22 00:51:06 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Started KiwipayLoanBackendApplication in 5.17 seconds (process running for 5.627)
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2f83c3d8
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@39f97b2f
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-22 00:51:06 [RMI TCP Connection(3)-192.168.2.40] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-22 00:51:11 [http-nio-8080-exec-1] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-22 00:51:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-06-22 00:51:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/favicon.ico", parameters={}
2025-06-22 00:51:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/], classpath [resources/], classpath [static/], classpath [public/], ServletContext [/]]
2025-06-22 00:51:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-06-22 00:51:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Using @ExceptionHandler com.kiwipay.kiwipay_loan_backend.leads.exception.GlobalExceptionHandler#handleGlobalException(Exception, WebRequest)
2025-06-22 00:51:11 [http-nio-8080-exec-10] ERROR c.k.k.l.e.GlobalExceptionHandler - Unexpected error occurred
org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.
	at org.springframework.web.servlet.resource.ResourceHttpRequestHandler.handleRequest(ResourceHttpRequestHandler.java:585)
	at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:52)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)
	at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapUnsecured$1(ObservationFilterChainDecorator.java:90)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:219)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-06-22 00:51:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/problem+json;q=0.8', given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8] and supported [application/problem+json]
2025-06-22 00:51:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ProblemDetail[type='about:blank', title='Internal Server Error', status=500, detail='An unexpected e (truncated)...]
2025-06-22 00:51:11 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource favicon.ico.]
2025-06-22 00:51:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 500 INTERNAL_SERVER_ERROR
2025-06-22 00:51:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-06-22 00:51:15 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-06-22 00:51:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-06-22 00:51:15 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-06-22 00:51:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-06-22 00:51:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-06-22 00:51:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-06-22 00:51:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-22 00:51:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-06-22 00:51:15 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-06-22 00:51:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-06-22 00:51:15 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-22 00:51:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-06-22 00:51:15 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-06-22 00:51:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-06-22 00:51:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-06-22 00:51:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 00:51:15 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api-docs/swagger-config", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-06-22 00:51:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-06-22 00:51:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-redir (truncated)...]
2025-06-22 00:51:15 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:15 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-06-22 00:51:15 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-06-22 00:51:16 [http-nio-8080-exec-10] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 471 ms
2025-06-22 00:51:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-06-22 00:51:16 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-06-22 00:51:16 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/leads/all
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/leads/all
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/leads/all", parameters={}
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.kiwipay.kiwipay_loan_backend.leads.controller.LeadController#getAllLeads()
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG c.k.k.l.c.AdaptiveSecurityAspect - AdaptiveSecurity check - Profile: dev, AdminOnly: true, Roles: USER,ADMIN
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG c.k.k.l.c.AdaptiveSecurityAspect - DEV profile detected - Access granted without authentication
2025-06-22 00:51:19 [http-nio-8080-exec-6] INFO  c.k.k.l.controller.LeadController - Fetching all leads without pagination
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG c.k.k.l.service.impl.LeadServiceImpl - Fetching all leads without pagination
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        l1_0.id,
        l1_0.client_name,
        c1_0.id,
        c1_0.active,
        c1_0.address,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.name,
        c1_0.updated_at,
        c1_0.updated_by,
        l1_0.created_at,
        l1_0.created_by,
        l1_0.dni,
        l1_0.email,
        ms1_0.id,
        ms1_0.active,
        ms1_0.category,
        ms1_0.created_at,
        ms1_0.created_by,
        ms1_0.name,
        ms1_0.updated_at,
        ms1_0.updated_by,
        l1_0.monthly_income,
        l1_0.origin,
        l1_0.phone,
        l1_0.receptionist_name,
        l1_0.status,
        l1_0.treatment_cost,
        l1_0.updated_at,
        l1_0.updated_by 
    from
        leads l1_0 
    left join
        clinics c1_0 
            on c1_0.id=l1_0.clinic_id 
    left join
        medical_specialties ms1_0 
            on ms1_0.id=l1_0.medical_specialty_id 
    order by
        l1_0.created_at desc
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[LeadResponse(id=1, clientName=Carlos Alberto Mendoza, dni=12345678, clinicName=Centro Mdico, medic (truncated)...]
2025-06-22 00:51:19 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 00:51:54 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-22 00:51:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:51:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:51:55 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 21008 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:51:55 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:51:55 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "staging"
2025-06-22 00:51:55 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:51:55 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:51:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:51:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 4 JPA repository interfaces.
2025-06-22 00:51:57 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:51:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:51:57 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:51:57 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:51:57 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1469 ms
2025-06-22 00:51:57 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:51:57 [restartedMain] DEBUG c.k.k.leads.config.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-06-22 00:51:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:51:57 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7bccba5
2025-06-22 00:51:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:51:57 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:51:57 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:51:57 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:51:57 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_staging (PostgreSQL 16.9)
2025-06-22 00:51:57 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:51:58 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 6 migrations (execution time 00:00.034s)
2025-06-22 00:51:58 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 5
2025-06-22 00:51:58 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "6 - create test user"
2025-06-22 00:51:58 [restartedMain] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "public" to version "6 - create test user" failed! Changes successfully rolled back.
2025-06-22 00:51:58 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

2025-06-22 00:51:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:51:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:51:58 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 00:51:58 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 00:51:58 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)
	... 42 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 48 common frames omitted
2025-06-22 00:52:33 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 34532 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:52:33 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:52:33 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "staging"
2025-06-22 00:52:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:52:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:52:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:52:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 4 JPA repository interfaces.
2025-06-22 00:52:35 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:52:35 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:52:35 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:52:35 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:52:35 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1509 ms
2025-06-22 00:52:35 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:52:35 [restartedMain] DEBUG c.k.k.leads.config.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-06-22 00:52:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:52:35 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7bccba5
2025-06-22 00:52:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:52:35 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:52:35 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:52:35 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:52:35 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_staging (PostgreSQL 16.9)
2025-06-22 00:52:35 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:52:35 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 6 migrations (execution time 00:00.019s)
2025-06-22 00:52:35 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 5
2025-06-22 00:52:35 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "6 - create test user"
2025-06-22 00:52:35 [restartedMain] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "public" to version "6 - create test user" failed! Changes successfully rolled back.
2025-06-22 00:52:35 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

2025-06-22 00:52:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:52:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:52:35 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 00:52:35 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 00:52:35 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)
	... 42 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 48 common frames omitted
2025-06-22 00:54:46 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 13664 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:54:46 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:54:46 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "staging"
2025-06-22 00:54:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:54:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:54:46 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:54:46 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 4 JPA repository interfaces.
2025-06-22 00:54:47 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:54:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:54:47 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:54:47 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:54:47 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1548 ms
2025-06-22 00:54:47 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:54:47 [restartedMain] DEBUG c.k.k.leads.config.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-06-22 00:54:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:54:48 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@51b9d119
2025-06-22 00:54:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:54:48 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:54:48 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:54:48 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:54:48 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_staging (PostgreSQL 16.9)
2025-06-22 00:54:48 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:54:48 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 6 migrations (execution time 00:00.019s)
2025-06-22 00:54:48 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 5
2025-06-22 00:54:48 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "6 - create test user"
2025-06-22 00:54:48 [restartedMain] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "public" to version "6 - create test user" failed! Changes successfully rolled back.
2025-06-22 00:54:48 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

2025-06-22 00:54:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:54:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:54:48 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 00:54:48 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 00:54:48 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)
	... 42 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 48 common frames omitted
2025-06-22 00:57:18 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 32124 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 00:57:18 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 00:57:18 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "staging"
2025-06-22 00:57:18 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 00:57:18 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 00:57:19 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 00:57:19 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 4 JPA repository interfaces.
2025-06-22 00:57:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 00:57:20 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 00:57:20 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 00:57:20 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 00:57:20 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1600 ms
2025-06-22 00:57:20 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 00:57:20 [restartedMain] DEBUG c.k.k.leads.config.JwtAuthFilter - Filter 'jwtAuthFilter' configured for use
2025-06-22 00:57:20 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 00:57:20 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@50222098
2025-06-22 00:57:20 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 00:57:20 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 00:57:20 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 00:57:20 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 00:57:20 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_staging (PostgreSQL 16.9)
2025-06-22 00:57:20 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 00:57:20 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 6 migrations (execution time 00:00.018s)
2025-06-22 00:57:20 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 5
2025-06-22 00:57:20 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "public" to version "6 - create test user"
2025-06-22 00:57:21 [restartedMain] ERROR o.f.core.internal.command.DbMigrate - Migration of schema "public" to version "6 - create test user" failed! Changes successfully rolled back.
2025-06-22 00:57:21 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

2025-06-22 00:57:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 00:57:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 00:57:21 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 00:57:21 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 00:57:21 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.internal.command.DbMigrate$FlywayMigrateException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:382)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$applyMigrations$1(DbMigrate.java:272)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.command.DbMigrate.applyMigrations(DbMigrate.java:271)
	at org.flywaydb.core.internal.command.DbMigrate.migrateGroup(DbMigrate.java:244)
	at org.flywaydb.core.internal.command.DbMigrate.lambda$migrateAll$0(DbMigrate.java:139)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:73)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.lambda$execute$0(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.jdbc.TransactionalExecutionTemplate.execute(TransactionalExecutionTemplate.java:55)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLAdvisoryLockTemplate.execute(PostgreSQLAdvisoryLockTemplate.java:56)
	at org.flywaydb.core.internal.database.postgresql.PostgreSQLConnection.lock(PostgreSQLConnection.java:96)
	at org.flywaydb.core.internal.schemahistory.JdbcTableSchemaHistory.lock(JdbcTableSchemaHistory.java:144)
	at org.flywaydb.core.internal.command.DbMigrate.migrateAll(DbMigrate.java:139)
	at org.flywaydb.core.internal.command.DbMigrate.migrate(DbMigrate.java:97)
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:188)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
Caused by: org.flywaydb.core.internal.sqlscript.FlywaySqlScriptException: Migration V6__create_test_user.sql failed
-----------------------------------------
SQL State  : 42703
Error Code : 0
Message    : ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
Location   : db/migration/V6__create_test_user.sql (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration\V6__create_test_user.sql)
Line       : 8
Statement  : -- Migracin V6: Crear usuario de prueba para desarrollo
-- Solo se ejecuta una vez y crea credenciales conocidas para testing

-- Insertar usuario administrador de prueba
-- Username: admin
-- Password: admin123 (se guarda hasheado con BCrypt)
-- Role: ADMIN
INSERT INTO users (username, email, password, role, enabled, account_non_expired, account_non_locked, credentials_non_expired, created_at, updated_at) 
VALUES (
    'admin',
    'admin@kiwipay.pe',
    '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', -- BCrypt hash de "admin123"
    'ADMIN',
    true,
    true,
    true,
    true,
    CURRENT_TIMESTAMP,
    CURRENT_TIMESTAMP
) ON CONFLICT (username) DO NOTHING

	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.handleException(DefaultSqlScriptExecutor.java:267)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:222)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.execute(DefaultSqlScriptExecutor.java:126)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.executeOnce(SqlMigrationExecutor.java:68)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.lambda$execute$0(SqlMigrationExecutor.java:57)
	at org.flywaydb.core.internal.database.DefaultExecutionStrategy.execute(DefaultExecutionStrategy.java:27)
	at org.flywaydb.core.internal.resolver.sql.SqlMigrationExecutor.execute(SqlMigrationExecutor.java:56)
	at org.flywaydb.core.internal.command.DbMigrate.doMigrateGroup(DbMigrate.java:374)
	... 42 common frames omitted
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la columna account_non_expired en la relacin users
  Position: 329
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2713)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2401)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:368)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:498)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:415)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:335)
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:321)
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:297)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:292)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.flywaydb.core.internal.jdbc.JdbcTemplate.executeStatement(JdbcTemplate.java:201)
	at org.flywaydb.core.internal.sqlscript.ParsedSqlStatement.execute(ParsedSqlStatement.java:95)
	at org.flywaydb.core.internal.sqlscript.DefaultSqlScriptExecutor.executeStatement(DefaultSqlScriptExecutor.java:210)
	... 48 common frames omitted
2025-06-22 01:04:58 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 1700 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 01:04:58 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 01:04:58 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "dev"
2025-06-22 01:04:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 01:04:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 01:04:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 01:04:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 4 JPA repository interfaces.
2025-06-22 01:05:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 01:05:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 01:05:00 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 01:05:00 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 01:05:00 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1628 ms
2025-06-22 01:05:00 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 01:05:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 01:05:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@744036e1
2025-06-22 01:05:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 01:05:00 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 01:05:00 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 01:05:00 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/callback' ...
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/callback using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@52ed4c5f ...
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Unable to resolve location classpath:db/callback.
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/migration' ...
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/migration using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@52ed4c5f ...
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning URL: file:/C:/Users/ALEXANDER.CASTILLO/OneDrive%20-%20ALESE%20SAC/Escritorio/KIWIPAY/ERP-Base/kiwipay-loan-backend/build/resources/main/db/migration
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning starting at classpath root in filesystem: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning for resources in path: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration (db/migration)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V1__create_initial_schema.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V2__make_client_name_and_dni_optional.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V3__create_auth_tables.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V4__fix_users_table_columns.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V5__fix_user_passwords.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V6__create_test_user.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V7__add_missing_security_columns.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classes at classpath:db/migration
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V2__make_client_name_and_dni_optional.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V3__create_auth_tables.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V5__fix_user_passwords.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V6__create_test_user.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V1__create_initial_schema.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V4__fix_users_table_columns.sql
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V7__add_missing_security_columns.sql
2025-06-22 01:05:00 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_dev (PostgreSQL 16.9)
2025-06-22 01:05:00 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Driver: PostgreSQL JDBC Driver 42.6.0
2025-06-22 01:05:00 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - DDL Transactions Supported: true
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Schemas: 
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Default schema: null
2025-06-22 01:05:00 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.c.i.c.SqlScriptCallbackFactory - Scanning for SQL callbacks ...
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.command.DbValidate - Validating migrations ...
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V7__add_missing_security_columns.sql (filename: V7__add_missing_security_columns.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V7__add_missing_security_columns.sql (filename: V7__add_missing_security_columns.sql)
2025-06-22 01:05:00 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Memory usage: 39 of 108M
2025-06-22 01:05:00 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : -1851624885
-> Resolved locally    : 1498966836
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
2025-06-22 01:05:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 01:05:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 01:05:01 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 01:05:01 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 01:05:01 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : -1851624885
-> Resolved locally    : 1498966836
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : -1851624885
-> Resolved locally    : 1498966836
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:146)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
2025-06-22 01:05:30 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 10676 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 01:05:30 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 01:05:30 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "dev"
2025-06-22 01:05:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 01:05:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 01:05:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 01:05:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 4 JPA repository interfaces.
2025-06-22 01:05:31 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 01:05:31 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 01:05:31 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 01:05:31 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 01:05:31 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1472 ms
2025-06-22 01:05:31 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 01:05:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 01:05:31 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1e37a215
2025-06-22 01:05:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 01:05:31 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 01:05:31 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 01:05:31 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/callback' ...
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/callback using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@76ca3bcf ...
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Unable to resolve location classpath:db/callback.
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/migration' ...
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/migration using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@76ca3bcf ...
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning URL: file:/C:/Users/ALEXANDER.CASTILLO/OneDrive%20-%20ALESE%20SAC/Escritorio/KIWIPAY/ERP-Base/kiwipay-loan-backend/build/resources/main/db/migration
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning starting at classpath root in filesystem: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning for resources in path: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration (db/migration)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V1__create_initial_schema.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V2__make_client_name_and_dni_optional.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V3__create_auth_tables.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V4__fix_users_table_columns.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V5__fix_user_passwords.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V6__create_test_user.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V7__add_missing_security_columns.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classes at classpath:db/migration
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V2__make_client_name_and_dni_optional.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V3__create_auth_tables.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V5__fix_user_passwords.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V6__create_test_user.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V1__create_initial_schema.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V4__fix_users_table_columns.sql
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V7__add_missing_security_columns.sql
2025-06-22 01:05:31 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_dev (PostgreSQL 16.9)
2025-06-22 01:05:31 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Driver: PostgreSQL JDBC Driver 42.6.0
2025-06-22 01:05:31 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - DDL Transactions Supported: true
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Schemas: 
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Default schema: null
2025-06-22 01:05:31 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.c.i.c.SqlScriptCallbackFactory - Scanning for SQL callbacks ...
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.command.DbValidate - Validating migrations ...
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V7__add_missing_security_columns.sql (filename: V7__add_missing_security_columns.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V7__add_missing_security_columns.sql (filename: V7__add_missing_security_columns.sql)
2025-06-22 01:05:31 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Memory usage: 42 of 108M
2025-06-22 01:05:32 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : -1851624885
-> Resolved locally    : 1498966836
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
2025-06-22 01:05:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 01:05:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-22 01:05:32 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-22 01:05:32 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-22 01:05:32 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : -1851624885
-> Resolved locally    : 1498966836
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1775)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1173)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:936)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1342)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1331)
	at com.kiwipay.kiwipay_loan_backend.KiwipayLoanBackendApplication.main(KiwipayLoanBackendApplication.java:22)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.flywaydb.core.api.exception.FlywayValidateException: Validate failed: Migrations have failed validation
Migration checksum mismatch for migration version 6
-> Applied to database : -1851624885
-> Resolved locally    : 1498966836
Either revert the changes to the migration, or run repair to update the schema history.
Need more flexibility with validation rules? Learn more: https://rd.gt/3AbJUZE
	at org.flywaydb.core.Flyway.lambda$migrate$0(Flyway.java:146)
	at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:213)
	at org.flywaydb.core.Flyway.migrate(Flyway.java:140)
	at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1771)
	... 23 common frames omitted
2025-06-22 01:05:49 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Starting KiwipayLoanBackendApplication using Java 17.0.15 with PID 16412 (C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\classes\java\main started by ALEXANDER.CASTILLO in C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend)
2025-06-22 01:05:49 [restartedMain] DEBUG c.k.k.KiwipayLoanBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-06-22 01:05:49 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - The following 1 profile is active: "dev"
2025-06-22 01:05:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-22 01:05:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-22 01:05:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-22 01:05:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 4 JPA repository interfaces.
2025-06-22 01:05:51 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-22 01:05:51 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-22 01:05:51 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-06-22 01:05:51 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-22 01:05:51 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1476 ms
2025-06-22 01:05:51 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-06-22 01:05:51 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-22 01:05:51 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@14ba6c87
2025-06-22 01:05:51 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-22 01:05:51 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-22 01:05:51 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-22 01:05:51 [restartedMain] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/callback' ...
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/callback using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1fac8eb6 ...
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Unable to resolve location classpath:db/callback.
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classpath resources at 'classpath:db/migration' ...
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Determining location urls for classpath:db/migration using ClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@1fac8eb6 ...
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning URL: file:/C:/Users/ALEXANDER.CASTILLO/OneDrive%20-%20ALESE%20SAC/Escritorio/KIWIPAY/ERP-Base/kiwipay-loan-backend/build/resources/main/db/migration
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning starting at classpath root in filesystem: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.c.FileSystemClassPathLocationScanner - Scanning for resources in path: C:\Users\ALEXANDER.CASTILLO\OneDrive - ALESE SAC\Escritorio\KIWIPAY\ERP-Base\kiwipay-loan-backend\build\resources\main\db\migration (db/migration)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V1__create_initial_schema.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V2__make_client_name_and_dni_optional.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V3__create_auth_tables.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V4__fix_users_table_columns.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V5__fix_user_passwords.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V6__create_test_user.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Found resource: db/migration/V7__add_missing_security_columns.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.classpath.ClassPathScanner - Scanning for classes at classpath:db/migration
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V2__make_client_name_and_dni_optional.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V3__create_auth_tables.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V5__fix_user_passwords.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V6__create_test_user.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V1__create_initial_schema.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V4__fix_users_table_columns.sql
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.r.ResourceNameValidator - Validating V7__add_missing_security_columns.sql
2025-06-22 01:05:51 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/kiwipay_loan_dev (PostgreSQL 16.9)
2025-06-22 01:05:51 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Driver: PostgreSQL JDBC Driver 42.6.0
2025-06-22 01:05:51 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - DDL Transactions Supported: true
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Schemas: 
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.s.SchemaHistoryFactory - Default schema: null
2025-06-22 01:05:51 [restartedMain] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: PostgreSQL 16.9 is newer than this version of Flyway and support has not been tested. The latest supported version of PostgreSQL is 15.
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.c.i.c.SqlScriptCallbackFactory - Scanning for SQL callbacks ...
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.command.DbValidate - Validating migrations ...
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V7__add_missing_security_columns.sql (filename: V7__add_missing_security_columns.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V2__make_client_name_and_dni_optional.sql (filename: V2__make_client_name_and_dni_optional.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V3__create_auth_tables.sql (filename: V3__create_auth_tables.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V5__fix_user_passwords.sql (filename: V5__fix_user_passwords.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V6__create_test_user.sql (filename: V6__create_test_user.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V1__create_initial_schema.sql (filename: V1__create_initial_schema.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V4__fix_users_table_columns.sql (filename: V4__fix_users_table_columns.sql)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.scanner.Scanner - Filtering out resource: db/migration/V7__add_missing_security_columns.sql (filename: V7__add_missing_security_columns.sql)
2025-06-22 01:05:51 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 7 migrations (execution time 00:00.019s)
2025-06-22 01:05:51 [restartedMain] DEBUG o.f.core.internal.command.DbSchemas - Skipping creation of existing schema: "public"
2025-06-22 01:05:51 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 7
2025-06-22 01:05:51 [restartedMain] WARN  o.f.core.internal.command.DbMigrate - outOfOrder mode is active. Migration of schema "public" may not be reproducible.
2025-06-22 01:05:51 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-06-22 01:05:51 [restartedMain] DEBUG org.flywaydb.core.FlywayExecutor - Memory usage: 43 of 108M
2025-06-22 01:05:51 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-22 01:05:51 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-06-22 01:05:51 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000025: Second-level cache region factory [org.hibernate.cache.jcache.internal.JCacheRegionFactory]
2025-06-22 01:05:51 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-22 01:05:51 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-22 01:05:51 [restartedMain] DEBUG o.h.t.d.sql.spi.DdlTypeRegistry - addDescriptor(6, org.hibernate.type.descriptor.sql.internal.CapacityDependentDdlType@244cdf11) replaced previous registration(org.hibernate.type.descriptor.sql.internal.DdlTypeImpl@2c7fd9d7)
2025-06-22 01:05:52 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-22 01:05:52 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-22 01:05:52 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-22 01:05:53 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 21 mappings in 'requestMappingHandlerMapping'
2025-06-22 01:05:53 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-06-22 01:05:53 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoint(s) beneath base path '/actuator'
2025-06-22 01:05:53 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/swagger-ui/**'], Mvc [pattern='/v3/api-docs/**'], Mvc [pattern='/swagger-resources/**'], Mvc [pattern='/webjars/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@22a9d929, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2e4bd0ed, org.springframework.security.web.context.SecurityContextHolderFilter@77f988a8, org.springframework.security.web.header.HeaderWriterFilter@3bf6ac56, org.springframework.security.web.authentication.logout.LogoutFilter@7133ff72, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@794f710e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@69c66400, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10ad60f, org.springframework.security.web.access.ExceptionTranslationFilter@1d13c99e, org.springframework.security.web.access.intercept.AuthorizationFilter@36b7199b]
2025-06-22 01:05:53 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/api/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@7624ac4f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@224e6140, org.springframework.security.web.context.SecurityContextHolderFilter@4b5f937d, org.springframework.security.web.header.HeaderWriterFilter@ba7f373, org.springframework.web.filter.CorsFilter@6b02eab3, org.springframework.security.web.authentication.logout.LogoutFilter@1ba2d4ae, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6080bd43, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7708784f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7ae929e7, org.springframework.security.web.session.SessionManagementFilter@3e05ede4, org.springframework.security.web.access.ExceptionTranslationFilter@41c032f3, org.springframework.security.web.access.intercept.AuthorizationFilter@605e2490]
2025-06-22 01:05:53 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/actuator/**'], Mvc [pattern='/error'], Mvc [pattern='/']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@634c7d09, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f1e8f82, org.springframework.security.web.context.SecurityContextHolderFilter@2837d7b0, org.springframework.security.web.header.HeaderWriterFilter@fef10b, org.springframework.security.web.authentication.logout.LogoutFilter@69dcb042, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2ccbe4a4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8c1bce7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@79f13437, org.springframework.security.web.access.ExceptionTranslationFilter@1df72b39, org.springframework.security.web.access.intercept.AuthorizationFilter@1fe22622]
2025-06-22 01:05:53 [restartedMain] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure Or [Mvc [pattern='/swagger-ui/**'], Mvc [pattern='/v3/api-docs/**'], Mvc [pattern='/swagger-resources/**'], Mvc [pattern='/webjars/**']] with [org.springframework.security.web.session.DisableEncodeUrlFilter@3c834d0b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11275960, org.springframework.security.web.context.SecurityContextHolderFilter@260ac708, org.springframework.security.web.header.HeaderWriterFilter@5ab2f19, org.springframework.security.web.authentication.logout.LogoutFilter@591e82f1, com.kiwipay.kiwipay_loan_backend.leads.config.SwaggerSecurityAnnotations$SwaggerAuthFilter@50a65cf9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@db9a393, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@75530811, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8c55a9e, org.springframework.security.web.access.ExceptionTranslationFilter@4e96d08d, org.springframework.security.web.access.intercept.AuthorizationFilter@740597c4]
2025-06-22 01:05:53 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-06-22 01:05:54 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-06-22 01:05:54 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-22 01:05:54 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-22 01:05:54 [restartedMain] INFO  c.k.k.KiwipayLoanBackendApplication - Started KiwipayLoanBackendApplication in 5.196 seconds (process running for 5.655)
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2d2624a9
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@31a2f85
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-06-22 01:05:54 [RMI TCP Connection(3)-192.168.2.40] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-22 01:05:59 [http-nio-8080-exec-1] WARN  o.s.w.s.h.HandlerMappingIntrospector - Cache miss for REQUEST dispatch to '/swagger-ui/index.html' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
2025-06-22 01:05:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-06-22 01:05:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-06-22 01:05:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 01:05:59 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:05:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-06-22 01:05:59 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-06-22 01:05:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-06-22 01:05:59 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 01:05:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-06-22 01:05:59 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-06-22 01:05:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-06-22 01:05:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 01:05:59 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-06-22 01:05:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-22 01:05:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-06-22 01:05:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 01:05:59 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 01:05:59 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-22 01:05:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:05:59 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 01:05:59 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:05:59 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:05:59 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:05:59 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:05:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-06-22 01:05:59 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-06-22 01:05:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-06-22 01:05:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api-docs/swagger-config", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-06-22 01:05:59 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:05:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-06-22 01:05:59 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-redir (truncated)...]
2025-06-22 01:05:59 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:05:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api-docs", parameters={}
2025-06-22 01:05:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-06-22 01:05:59 [http-nio-8080-exec-9] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 279 ms
2025-06-22 01:05:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-06-22 01:05:59 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 48, 46, 49, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-06-22 01:05:59 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/leads/all
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/leads/all
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/leads/all", parameters={}
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.kiwipay.kiwipay_loan_backend.leads.controller.LeadController#getAllLeads()
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG c.k.k.l.c.AdaptiveSecurityAspect - AdaptiveSecurity check - Profile: dev, AdminOnly: true, Roles: USER,ADMIN
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG c.k.k.l.c.AdaptiveSecurityAspect - DEV profile detected - Access granted without authentication
2025-06-22 01:06:04 [http-nio-8080-exec-10] INFO  c.k.k.l.controller.LeadController - Fetching all leads without pagination
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG c.k.k.l.service.impl.LeadServiceImpl - Fetching all leads without pagination
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        l1_0.id,
        l1_0.client_name,
        c1_0.id,
        c1_0.active,
        c1_0.address,
        c1_0.created_at,
        c1_0.created_by,
        c1_0.name,
        c1_0.updated_at,
        c1_0.updated_by,
        l1_0.created_at,
        l1_0.created_by,
        l1_0.dni,
        l1_0.email,
        ms1_0.id,
        ms1_0.active,
        ms1_0.category,
        ms1_0.created_at,
        ms1_0.created_by,
        ms1_0.name,
        ms1_0.updated_at,
        ms1_0.updated_by,
        l1_0.monthly_income,
        l1_0.origin,
        l1_0.phone,
        l1_0.receptionist_name,
        l1_0.status,
        l1_0.treatment_cost,
        l1_0.updated_at,
        l1_0.updated_by 
    from
        leads l1_0 
    left join
        clinics c1_0 
            on c1_0.id=l1_0.clinic_id 
    left join
        medical_specialties ms1_0 
            on ms1_0.id=l1_0.medical_specialty_id 
    order by
        l1_0.created_at desc
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[LeadResponse(id=1, clientName=Carlos Alberto Mendoza, dni=12345678, clinicName=Centro Mdico, medic (truncated)...]
2025-06-22 01:06:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-06-22 01:06:09 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-22 01:06:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-22 01:06:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
